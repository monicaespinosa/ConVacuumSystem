Version 4
SHEET 1 880 1268
WIRE 528 -720 128 -720
WIRE 160 -560 -112 -560
WIRE 272 -560 240 -560
WIRE 320 -560 272 -560
WIRE -112 -544 -112 -560
WIRE 272 -480 272 -560
WIRE -112 -432 -112 -464
WIRE 272 -368 272 -416
WIRE 128 -256 128 -720
WIRE 528 -256 528 -720
WIRE 528 -256 128 -256
WIRE 576 -208 -240 -208
WIRE 256 -112 224 -112
WIRE 352 -112 320 -112
WIRE -96 -32 -112 -32
WIRE -1984 -16 -1984 -48
WIRE -112 -16 -112 -32
WIRE 112 -16 -112 -16
WIRE 224 -16 224 -112
WIRE 224 -16 192 -16
WIRE 256 -16 224 -16
WIRE 352 -16 352 -112
WIRE 352 -16 336 -16
WIRE -160 80 -160 64
WIRE 272 80 272 64
WIRE -1984 96 -1984 64
WIRE 224 96 224 -16
WIRE 240 96 224 96
WIRE 352 112 352 -16
WIRE 352 112 304 112
WIRE 464 112 352 112
WIRE -64 128 -96 128
WIRE 32 128 16 128
WIRE 128 128 32 128
WIRE 240 128 128 128
WIRE 272 160 272 144
WIRE -160 176 -160 160
WIRE -96 176 -96 128
WIRE -96 176 -160 176
WIRE 32 176 32 128
WIRE 128 176 128 128
WIRE 272 176 272 160
WIRE 464 176 464 112
WIRE -160 192 -160 176
WIRE -1888 224 -1888 208
WIRE 32 288 32 240
WIRE 128 288 128 256
WIRE -160 304 -160 272
WIRE 464 304 464 256
WIRE -1888 336 -1888 304
WIRE -240 352 -240 -208
WIRE 576 352 576 -208
WIRE 576 352 -240 352
FLAG 272 -368 0
FLAG 464 304 0
FLAG 272 64 VD
FLAG 272 160 0
FLAG -160 304 0
FLAG 464 112 IN_Ard
FLAG -112 -432 0
FLAG -1984 96 0
FLAG -1984 -48 VD
FLAG -160 64 VD
FLAG 320 -560 LP_filter_output
FLAG 128 288 0
FLAG 32 288 0
FLAG -1888 336 0
FLAG -96 -32 LP_filter_output
SYMBOL res 256 -576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL cap 256 -480 R0
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL res 448 160 R0
SYMATTR InstName R2
SYMATTR Value 10Meg
SYMBOL res 352 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 255k
SYMBOL res 208 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL cap 320 -128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 100p
SYMBOL voltage -112 -560 R0
WINDOW 3 -216 98 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR Value PULSE(0 3.3 0 0 0 {t_on} {1/fclk})
SYMATTR SpiceLine Cpar=15p
SYMATTR InstName V1
SYMBOL voltage -1984 -32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA1
SYMATTR Value 3.3
SYMBOL res -176 176 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res -176 64 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL res 112 160 R0
SYMATTR InstName R12
SYMATTR Value 255k
SYMBOL cap 16 176 R0
SYMATTR InstName C6
SYMATTR Value 100p
SYMBOL res 32 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL OpAmps\\UniversalOpAmp2 272 112 R0
SYMATTR InstName U1
SYMBOL voltage -1888 208 R0
WINDOW 3 -216 98 Left 2
WINDOW 123 24 44 Left 2
WINDOW 39 24 72 Left 2
SYMATTR Value SINE(1.0055 0.6445 {f_in})
SYMATTR Value2 AC 1
SYMATTR SpiceLine Cpar=15p
SYMATTR InstName V2
TEXT 144 -704 Left 2 ;Pre-Filter
TEXT -160 -184 Left 2 ;Filter and Amplifier
TEXT -272 -800 Left 2 ;.tran 0 {5100/fclk} {5000/fclk}
TEXT -2144 -560 Left 2 !.param t_on_max=1/fclk-10e-9 t_on_50=t_on_max*0.5 t_on_10=t_on_max*0.1 f_in=100
TEXT -272 -832 Left 2 !.param fclk=10Meg
TEXT -2144 -488 Left 2 ;.tran 100m
TEXT -2144 -456 Left 2 ;.ac lin 100 10 15k
TEXT -272 -768 Left 2 !.step param t_on 9.9n 49.5n 0.5n
TEXT -216 -672 Left 2 !.tran 0 {5100/fclk} {5000/fclk}
