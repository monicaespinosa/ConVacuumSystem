Version 4
SHEET 1 884 1268
WIRE -976 -32 -976 -64
WIRE -48 -32 -448 -32
WIRE -976 80 -976 48
WIRE -464 128 -736 128
WIRE -416 128 -464 128
WIRE -304 128 -336 128
WIRE -272 128 -304 128
WIRE -736 144 -736 128
WIRE -304 208 -304 128
WIRE -736 256 -736 224
WIRE -304 320 -304 272
WIRE -448 432 -448 -32
WIRE -48 432 -48 -32
WIRE -48 432 -448 432
WIRE -48 496 -960 496
WIRE -432 544 -496 544
WIRE -304 544 -368 544
WIRE -928 624 -944 624
WIRE -944 656 -944 624
WIRE -720 656 -944 656
WIRE -496 656 -496 544
WIRE -496 656 -640 656
WIRE -432 656 -496 656
WIRE -304 656 -304 544
WIRE -304 656 -352 656
WIRE -384 752 -384 736
WIRE -496 768 -496 656
WIRE -416 768 -496 768
WIRE -304 784 -304 656
WIRE -304 784 -352 784
WIRE -192 784 -304 784
WIRE -736 800 -784 800
WIRE -608 800 -656 800
WIRE -496 800 -608 800
WIRE -416 800 -496 800
WIRE -880 848 -880 832
WIRE -608 848 -608 800
WIRE -496 848 -496 800
WIRE -384 848 -384 816
WIRE -192 848 -192 784
WIRE -880 944 -880 928
WIRE -784 944 -784 800
WIRE -784 944 -880 944
WIRE -880 960 -880 944
WIRE -608 960 -608 912
WIRE -496 960 -496 928
WIRE -192 976 -192 928
WIRE -880 1072 -880 1040
WIRE -960 1120 -960 496
WIRE -48 1120 -48 496
WIRE -48 1120 -960 1120
FLAG -304 320 0
FLAG -192 976 0
FLAG -384 736 VD
FLAG -880 1072 0
FLAG -192 784 IN_Ard
FLAG -736 256 0
FLAG -976 80 0
FLAG -976 -64 VD
FLAG -384 848 0
FLAG -880 832 VD
FLAG -496 960 0
FLAG -608 960 0
FLAG -928 624 LP_filter_output
FLAG -272 128 LP_filter_output
FLAG -464 128 in
SYMBOL res -320 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL cap -320 208 R0
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL res -208 832 R0
SYMATTR InstName R2
SYMATTR Value 10Meg
SYMBOL res -336 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 252k
SYMBOL res -624 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL cap -368 528 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 100p
SYMBOL voltage -736 128 R0
WINDOW 3 -177 -30 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 40 44 Left 2
WINDOW 0 37 17 Left 2
SYMATTR Value PULSE(0 3.3 0 0 0 {t_on_10} {1/fclk})
SYMATTR SpiceLine Cpar=15p
SYMATTR InstName V1
SYMBOL voltage -976 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VD
SYMATTR Value 3.3
SYMBOL res -896 944 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res -896 832 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL res -512 832 R0
SYMATTR InstName R12
SYMATTR Value 252k
SYMBOL cap -624 848 R0
SYMATTR InstName C6
SYMATTR Value 100p
SYMBOL res -640 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL OpAmps\\UniversalOpAmp2 -384 784 R0
SYMATTR InstName U1
TEXT -440 -16 Left 2 ;Pre-Filter
TEXT -952 512 Left 2 ;Filter and Amplifier
TEXT -1056 -176 Left 2 !.tran 0 {5013/fclk} {5000/fclk}
TEXT -1056 -216 Left 2 !.param t_on_max=1/fclk-10e-9 t_on_50=t_on_max*0.5 t_on_10=t_on_max*0.1
TEXT -1056 -248 Left 2 !.param fclk=10Meg
